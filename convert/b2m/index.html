<!DOCTYPE html>
<!--[if IE 8]> 				 <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />
<title>BBCode Feral to Markdown Github converter</title>
<link rel="stylesheet" href="css/foundation.css" />
<script src="js/vendor/custom.modernizr.js"></script>
<style type="text/css" media="screen">
.mycustom1 { 
}
.mycustom2 {  
height: 300px;
padding: 0px; 
}
.mycustom3 {
height: 100%;
}
.floatr {
float:right;
}
.linkcol1 {
color:orange;
}
.linkcol2 {
color:green;
}
</style>
<script type="text/javascript">
function convert()
{
var left = document.getElementById("left_ta");
var right = document.getElementById("right_ta");

var left_value = left.value;

//general BBcode conversion
left_value = left_value
	.replace(/^\[h1\](.*)\[\/h1\]\s*$/gmi, "# $1\n") //h4; replace [h1] $1 [/h1] with # $1 adds a new line. Feral specific.
	.replace(/^\[h2\](.*)\[\/h2\]\s*$/gmi, "## $1\n") //h2; replace [h2] $1 [/h2] with ## $1 adds a new line. Feral specific.
	.replace(/^\[h3\](.*)\[\/h3\]\s*$/gmi, "### $1\n") //h3; replace [h3] $1 [/h3] with ### $1 adds a new line. Feral specific.
	.replace(/^\[h4\](.*)\[\/h4\]\s*$/gmi, "#### $1\n") //h4; replace [h4] $1 [/h4] with #### $1 adds a new line. Feral specific.
	.replace(/^\[h5\](.*)\[\/h5\]\s*$/gmi, "##### $1\n") //h2; replace [h5] $1 [/h5] with ##### $1 adds a new line. Feral specific.
	.replace(/^\[h6\](.*)\[\/h6\]\s*$/gmi, "###### $1\n") //h3; replace [h6] $1 [/h6] with ###### $1 adds a new line. Feral specific.
	.replace(/\[b\]((?:.|\n)+?)\[\/b\]/gmi, "**$1**") //bold; replace [b] $1 [/b] with ** $1 **
	.replace(/\[strong\]((?:.|\n)+?)\[\/strong\]/gmi, "**$1**") //bold; replace [b] $1 [/b] with ** $1 **
	.replace(/\[i\]((?:.|\n)+?)\[\/i\]/gmi, "`$1`")	 //italic; replace [i] $1 [/i] with ` $1 `
	.replace(/\[em\]((?:.|\n)+?)\[\/em\]/gmi, "`$1`")  //italic; replace [em] $1 [/em] with ` $1 `
	.replace(/\[code\]((?:.|\n)+?)\[\/code\]/gmi, "```\n$1\n```\n")  //code; replace [code] $1 [/code] with $1 also adds a new line. Feral specific.
	.replace(/\[img\]((?:.|\n)+?)\[\/img\]/gmi,'![]($1)')
	.replace(/\[url\]((?:.|\n)+?)\[\/url\]/gmi,'[$1]($1)')
	.replace(/\[url=(.+?)\]((?:.|\n)+?)\[\/url\]/gmi,'[$2]($1)');					
	//.replace(/\[s\]((?:.|\n)+?)\[\/s\]/gmi, "~~	$1 ~~") //strikethrough; replace [s] $1 [/s] with ~~ $1 ~~
	//.replace(/\[color\=.+?\]((?:.|\n)+?)\[\/color\]/gmi, "$1") //remove [color] tags
	//.replace(/(\n)\[\*\]/gmi, "$1* ") //lists; replace lists with + unordered lists.
	//.replace(/\[\/*list\]/gmi, '')
	//.replace(/\[u\]((?:.|\n)+?)\[\/u\]/gmi, "*$1*")	 //underline; replace [u] $1 [/u] with * $1 *
right.value = left_value;	
console.log('converted');
}
</script>
</head>
<body>

	<div class="row">
		<div class="large-12 columns">
			<h2>BBcode to Markdown</h2>
			<p>
			This is the BBCode to Markdown converter.  <a class="linkcol1" href="https://github.com/feralhosting/BBCode-To-Markdown-Converter">Fork/Contribute to this version</a>&nbsp;&nbsp;<a class="linkcol2" href="http://github.com/JonDum/BBCode-To-Markdown-Converter">Credits</a><a class="floatr" href="http://feralhosting.github.io/">Return to feralhosting.github.io</a>
			</p>
			<hr />
		</div>
	</div>

	<div class="row">
		<div class="large-12 columns">
			<h3>How to use this converter</h3>

			<!-- Grid Example -->
			<div class="row">
				<div class="large-12 columns">
					<div class="panel">
						<p>
						Paste your Feral BBcode into the top box, and a Markdown formatted version appears on the bottom. Here is a link to the <a href="http://feralhosting.github.io/convert/m2b/">Markdown to BBcode</a> converter
						</p>
						<p>
						BBCode <code>[code]...[/code]</code> tags will be replaced wtih <code>```</code> and not tabs/spaces. This converter only replaces tags Feral uses.
						</p>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="large-12 columns mycustom1">
					<div class="panel mycustom2">
						<textarea id="left_ta" class="mycustom3" onChange="convert()" onKeyUp="convert()" placeholder="Enter your BBCode formatted text here" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter your BBCode formatted text here'"></textarea>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="large-12 columns mycustom1">
					<div class="panel mycustom2">
						<textarea id="right_ta" class="mycustom3" placeholder="Your Markdown formatted text will be automatically shown in this box" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Your Markdown formatted text will be automatically shown in this box'"></textarea>
					</div>
				</div>
			</div>
		</div>
	</div>
  <script>
  document.write('<script src=' +
  ('__proto__' in {} ? 'js/vendor/zepto' : 'js/vendor/jquery') +
  '.js><\/script>')
  </script>
  
  <script src="js/foundation.min.js"></script>
  <!--
  
  <script src="js/foundation/foundation.js"></script>
  
  <script src="js/foundation/foundation.dropdown.js"></script>
  
  <script src="js/foundation/foundation.placeholder.js"></script>
  
  <script src="js/foundation/foundation.forms.js"></script>
  
  <script src="js/foundation/foundation.alerts.js"></script>
  
  <script src="js/foundation/foundation.magellan.js"></script>
  
  <script src="js/foundation/foundation.reveal.js"></script>
  
  <script src="js/foundation/foundation.tooltips.js"></script>
  
  <script src="js/foundation/foundation.clearing.js"></script>
  
  <script src="js/foundation/foundation.cookie.js"></script>
  
  <script src="js/foundation/foundation.joyride.js"></script>
  
  <script src="js/foundation/foundation.orbit.js"></script>
  
  <script src="js/foundation/foundation.section.js"></script>
  
  <script src="js/foundation/foundation.topbar.js"></script>
  
  -->
  
  <script>
    $(document).foundation();
  </script>
	<script type="text/javascript">
		var textBoxl = document.getElementById("left_ta");
		var textBoxr = document.getElementById("right_ta");
		textBoxl.onfocus = function() {
			textBoxl.select();

			textBoxl.onmouseup = function() {
				textBoxl.onmouseup = null;
				return false;
			};
		};
			textBoxr.onfocus = function() {
			textBoxr.select();

			textBoxr.onmouseup = function() {
				textBoxr.onmouseup = null;
				return false;
			};
		};
		// http://stackoverflow.com/questions/5797539/jquery-select-all-text-from-a-textarea
	</script>
</body>
</html>
