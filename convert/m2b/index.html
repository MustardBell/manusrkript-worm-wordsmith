<!DOCTYPE html>
<!--[if IE 8]> 				 <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />
<title>Markdown Github to BBCode Feral converter</title>
<link rel="stylesheet" href="css/foundation.css" />
<script src="js/vendor/custom.modernizr.js"></script>
<style type="text/css" media="screen">
.mycustom1 { 
}
.mycustom2 {  
height: 400px;
padding: 0px; 
}
.mycustom3 {
height: 100%;
}
</style>
<script type="text/javascript" charset="utf-8">
function convert()
{
    var left = document.getElementById("left_ta");
    var right = document.getElementById("right_ta");
    var left_value = left.value;
        //general Markdown conversion
        left_value = left_value
        .replace(/^[#]{4,4}\s*(.*[^\s])\s*####\n?$/gmi, "[h4]$1[/h4]") // h4
        .replace(/^[#]{4,4}\s*(.*)\n?$/gmi, "[h4]$1[/h4]") // h4
        //
        .replace(/^[#]{3,3}\s*(.*[^\s])\s*###\n?$/gmi, "[h3]$1[/h3]") // h3
        .replace(/^[#]{3,3}\s?(.*)\n?$/gmi, "[h3]$1[/h3]") // h3
        //
        .replace(/^[#]{2,2}\s*(.*[^\s])\s*##\n?$/gmi, "[h2]$1[/h2]") // h2
        .replace(/^[#]{2,2}\s*(.*)\n?$/gmi, "[h2]$1[/h2]") // h2
        //
        .replace(/^\t|[ ]{4,4}(.*)/gmi, "$1")  //code; strips tabs
        .replace(/^\`{3,3}(.*)\n((?:.|\n)+?)\n\`{3,3}\n?$/gmi, "[code]$2[/code]")	// back ticks
        .replace(/\`([^\`].*?)\`/gmi, "[i]$1[/i]")  // back ticks
        //
        .replace(/^!\[.*?\]\((.*?)\)$/gmi,'[img]$1[/img]') //image
		.replace(/^\[!\[.*?\]\((.*?)\)\]\((.*?)\)$/gmi,'[img]$1[/img]\nClickable image was pointing to [url=$2]here[/url]') //image
        //
        .replace(/\[([^\]]+)\]\(([^)]+)\)/gmi,'[url=$2]$1[/url]') // url
        //
        .replace(/\*\*([^\*].*?)\*\*/gmi, "[b]$1[/b]") // bold
        .replace(/\*([^\*].*?)\*/gmi, "[i]$1[/i]")	// italic
        //
        right.value = left_value;
        console.log('converted');
}
</script>
</head>
<body>

	<div class="row">
		<div class="large-12 columns">
			<h2>Markdown to BBcode</h2>
			<p>This is the Markdown to BBCode converter  <a href="https://github.com/feralhosting/markdown-to-bbcode">Fork/Contribute to this version</a>&nbsp;&nbsp;<a href="http://github.com/JonDum/BBCode-To-Markdown-Converter">Credits</a></p>
			<hr />
		</div>
	</div>

	<div class="row">
		<div class="large-12 columns">
			<h3>How to use this converter</h3>

			<!-- Grid Example -->
			<div class="row">
				<div class="large-12 columns">
					<div class="panel">
						<p>
						Paste your Markdown formatted text into the top box and Feral FAQ formatted BBCode appears in the bottom. Here is a link to the <a href="http://feralhosting.github.io/convert/b2m/">bbcode to markdown</a> converter
						</p>
						<p>
						Indented code will have the space/tabs stripped. You have to manually apply [code] tags to these. Github style <code>```</code> code will be replaced with <code>[code]...[/code]</code> tags.
						</p>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="large-12 columns mycustom1">
					<div class="panel mycustom2">
						<textarea id="left_ta" class="mycustom3" value="" onChange="convert()" onKeyUp="convert()"></textarea>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="large-12 columns mycustom1">
					<div class="panel mycustom2">
						<textarea id="right_ta" class="mycustom3"></textarea>
					</div>
				</div>
			</div>

  <script>
  document.write('<script src=' +
  ('__proto__' in {} ? 'js/vendor/zepto' : 'js/vendor/jquery') +
  '.js><\/script>')
  </script>
  
  <script src="js/foundation.min.js"></script>
  <!--
  
  <script src="js/foundation/foundation.js"></script>
  
  <script src="js/foundation/foundation.dropdown.js"></script>
  
  <script src="js/foundation/foundation.placeholder.js"></script>
  
  <script src="js/foundation/foundation.forms.js"></script>
  
  <script src="js/foundation/foundation.alerts.js"></script>
  
  <script src="js/foundation/foundation.magellan.js"></script>
  
  <script src="js/foundation/foundation.reveal.js"></script>
  
  <script src="js/foundation/foundation.tooltips.js"></script>
  
  <script src="js/foundation/foundation.clearing.js"></script>
  
  <script src="js/foundation/foundation.cookie.js"></script>
  
  <script src="js/foundation/foundation.joyride.js"></script>
  
  <script src="js/foundation/foundation.orbit.js"></script>
  
  <script src="js/foundation/foundation.section.js"></script>
  
  <script src="js/foundation/foundation.topbar.js"></script>
  
  -->
  
  <script>
    $(document).foundation();
  </script>
</body>
</html>
